define(["jcontroller/jcontroller","jloader/jsync","jsingleton","jcontroller/render","jrouter/location/locationObject"],function(e,t,n,r,i){var s={refreshRoute:function(){try{this.preRouteStringHandler()}catch(e){throw t.loadingStatus===0?e:"project files not loaded"}},preRouteStringHandler:function(){this.routeStringHandler(i.routeAfterHash())},routeStringHandler:function(t){if(t.length>0&&t.charAt(0)!=="/")throw"invalid route";if(n.singleton.routes.reroute!==undefined)for(var i in n.singleton.routes.reroute)if(t===n.singleton.routes.reroute[i].from){this.rerouteStringHandler(n.singleton.routes.reroute[i].to);return}if(n.singleton.routes[t]!==undefined&&n.singleton.routes[t].indexOf(".")>-1){var s=n.singleton.routes[t].split(".");if(s.length===2){e.callController(s[0],s[1]);return}}var o=n.singleton.views[n.singleton.routes[t]];if(o===undefined){var u=n.singleton.views[n.singleton.routes.otherwise];if(u===undefined)throw"route not found";r.renderAll(u)}r.renderAll(o)},rerouteStringHandler:function(e){i.changeRoute(e)}};return s});